version: "v1.0"
name: Python Example
agent:
  machine:
    type: e1-standard-2
    os_image: ubuntu1804

blocks:
  - name: Tests
    task:
      prologue:
        commands:
          - checkout
          - cache restore v1-pip-$(checksum requirements.txt)
          - pip install --cache-dir .pip_cache
          - cache store v1-pip-$(checksum requirements.txt) .pip_cache
      jobs:
        - name: Everything
          commands:
            - py.test
